const express = require('express');
const { Pool } = require('pg');
const app = express();
const PORT = process.env.PORT || 10000;

// Unganisha Database kwa kutumia URL ya Render
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: {
    rejectUnauthorized: false
  }
});

app.use(express.json());

// Njia ya kwanza (Welcome Route)
app.get('/', (req, res) => {
  res.send('PANDAS GLOBAL SYSTEM IS LIVE ðŸš€ | Infrastructure of Trust');
});

// Njia ya kurekodi mzigo (Lose Cargo Entry)
app.post('/add-cargo', async (req, res) => {
  const { sender_name, cargo_details, destination } = req.body;
  try {
    const result = await pool.query(
      'INSERT INTO cargo (sender_name, cargo_details, destination) VALUES ($1, $2, $3) RETURNING *',
      [sender_name, cargo_details, destination]
    );
    res.json({ message: 'Mzigo umerekodiwa vizuri! âœ…', data: result.rows[0] });
  } catch (err) {
    console.error(err);
    res.status(500).send('Database Error');
  }
});

app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
  console.log('Connected to PANDAS Database successfully! âœ…');
});
cat <<EOF > server.js
const express = require('express');
const { Pool } = require('pg');
const app = express();
const PORT = process.env.PORT || 10000;

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false }
});

app.use(express.json());

app.get('/', (req, res) => {
  res.send('PANDAS GLOBAL SYSTEM IS LIVE ðŸš€ | Infrastructure of Trust');
});

app.listen(PORT, () => {
  console.log('Server is running and connected to PANDAS Database! âœ…');
});
EOF
cat server.js

git add .

git add .
git commit -m "Uandishi wa injini ya PANDAS na Database"
git push origin main
